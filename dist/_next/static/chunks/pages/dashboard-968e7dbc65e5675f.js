(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{161:(e,t,s)=>{"use strict";s.d(t,{A0:()=>n,BF:()=>o,Hj:()=>i,XI:()=>l,nA:()=>d,nd:()=>c,r6:()=>x});var r=s(7876);s(4232);var a=s(8928);function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",t),...s})})}function n(e){let{className:t,...s}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function x(e){let{className:t,...s}=e;return(0,r.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",t),...s})}},2195:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>i,av:()=>c,j7:()=>o,tU:()=>n});var r=s(7876);s(4232);var a=s(491),l=s(8928);function n(e){let{className:t,...s}=e;return(0,r.jsx)(a.bL,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",t),...s})}},3601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var r=s(7876),a=s(4232),l=s(1379),n=s(1899),o=s(4660),i=s(6739),c=s(9457),d=s(1416),x=s(5397),u=s(4613),m=s(2774),h=s(6591),f=s(9081);function g(e){var t,s,l,g,j;let{logData:p=[],isLoading:b=!0,error:v=null,chartConfig:N={},formatBytes:w=e=>"".concat(e," Bytes")}=e,y=a.useMemo(()=>{if(!p||0===p.length)return{totalRequests:0,success:0,clientErrors:0,serverErrors:0,totalBandwidth:0,requestsTrend:0,successTrend:0,clientErrorsTrend:0,serverErrorsTrend:0,bandwidthTrend:0,historicalComparison:null};let e=Math.floor(p.length/2),t=p.slice(-e),s=p.slice(0,e),r=e=>e.reduce((e,t)=>{e.success+=t.status_2xx||0;let s=t.status_3xx||0;return e.clientErrors+=t.status_4xx||0,e.serverErrors+=t.status_5xx||0,e.totalBandwidth+=t.response_size||0,e.totalRequests+=(t.status_2xx||0)+s+(t.status_4xx||0)+(t.status_5xx||0),e},{totalRequests:0,success:0,clientErrors:0,serverErrors:0,totalBandwidth:0}),a=r(t),l=r(s),n=(e,t)=>({requestsPerHour:e.totalRequests/t,successPerHour:e.success/t,clientErrorsPerHour:e.clientErrors/t,serverErrorsPerHour:e.serverErrors/t,bandwidthPerHour:e.totalBandwidth/t}),o=n(a,t.length),i=n(l,s.length),c=r(p),d={requestsTrend:0,successTrend:0,clientErrorsTrend:0,serverErrorsTrend:0,bandwidthTrend:0},x=(e,t)=>0===t?100*(e>0):(e-t)/t*100;return s.length>0&&t.length>0&&(d.requestsTrend=x(o.requestsPerHour,i.requestsPerHour),d.successTrend=x(o.successPerHour,i.successPerHour),d.clientErrorsTrend=x(o.clientErrorsPerHour,i.clientErrorsPerHour),d.serverErrorsTrend=x(o.serverErrorsPerHour,i.serverErrorsPerHour),d.bandwidthTrend=x(o.bandwidthPerHour,i.bandwidthPerHour)),{...c,...d}},[p]),_=e=>{if(!e)return null;let t=e.toFixed(1),s=e>0,a=e<0,l=s?n.A:a?o.A:null;return(0,r.jsxs)("span",{className:"ml-2 inline-flex items-center text-xs ".concat(s?"text-green-600":a?"text-red-600":"text-muted-foreground"),children:[l&&(0,r.jsx)(l,{className:"h-3 w-3 mr-0.5"}),s?"+":"",t,"% vs historical"]})},S={requests:{iconColor:(null==(t=N.status_3xx)?void 0:t.color)||"#3b82f6"},success:{iconColor:(null==(s=N.status_2xx)?void 0:s.color)||"#22c55e"},clientError:{iconColor:(null==(l=N.status_4xx)?void 0:l.color)||"#f97316"},serverError:{iconColor:(null==(g=N.status_5xx)?void 0:g.color)||"#ef4444"},bandwidth:{iconColor:(null==(j=N.response_size)?void 0:j.color)||"#8b5cf6"}};return b?(0,r.jsx)("div",{className:"@xl/main:grid-cols-2 @5xl/main:grid-cols-5 grid grid-cols-1 gap-4 px-4 lg:px-6",children:Array.from({length:5}).map((e,t)=>(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(m.E,{className:"h-4 w-1/2"}),(0,r.jsx)(m.E,{className:"h-8 w-1/3 mt-1"})]}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)(m.E,{className:"h-4 w-3/4"})})]},t))}):v?(0,r.jsx)("div",{className:"px-4 lg:px-6",children:(0,r.jsxs)(h.Fc,{variant:"destructive",className:"mb-4",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)(h.XL,{children:"Error Loading Metrics"}),(0,r.jsx)(h.TN,{children:"string"==typeof v?v:JSON.stringify(v)})]})}):(0,r.jsxs)("div",{className:"@xl/main:grid-cols-3 @5xl/main:grid-cols-5 grid grid-cols-1 gap-4 px-4 lg:px-6",children:[(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(f.ZB,{className:"text-sm font-medium",children:"Total Requests"}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground",style:{color:S.requests.iconColor}})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:y.totalRequests.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last 500 vs previous 500 ",_(y.requestsTrend)]})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(f.ZB,{className:"text-sm font-medium",children:"Successful Requests (2xx)"}),(0,r.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground",style:{color:S.success.iconColor}})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[y.success.toLocaleString(),(0,r.jsxs)("span",{className:"text-sm ml-2 text-muted-foreground",children:["(",y.totalRequests>0?"".concat((y.success/y.totalRequests*100).toFixed(1),"%"):"0%",")"]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Success rate comparison ",_(y.successTrend)]})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(f.ZB,{className:"text-sm font-medium",children:"Client Errors (4xx)"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground",style:{color:S.clientError.iconColor}})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:y.clientErrors.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[y.totalRequests>0?"".concat((y.clientErrors/y.totalRequests*100).toFixed(1),"%"):"0%"," of total requests ",_(y.clientErrorsTrend)]})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(f.ZB,{className:"text-sm font-medium",children:"Server Errors (5xx)"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground",style:{color:S.serverError.iconColor}})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:y.serverErrors.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[y.totalRequests>0?"".concat((y.serverErrors/y.totalRequests*100).toFixed(1),"%"):"0%"," of total requests ",_(y.serverErrorsTrend)]})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(f.ZB,{className:"text-sm font-medium",children:"Total Bandwidth"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground",style:{color:S.bandwidth.iconColor}})]}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:w(y.totalBandwidth)}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Average per request: ",w(y.totalBandwidth/y.totalRequests)," ",_(y.bandwidthTrend)]})]})]})]})}var j=s(2195),p=s(252),b=s(2333),v=s(4354),N=s(6328),w=s(6321),y=s(1874);function _(e){let{title:t,items:s,className:a}=e;return(0,r.jsxs)("div",{className:"rounded-md border bg-popover p-4 text-popover-foreground shadow-md ".concat(a),children:[(0,r.jsx)("div",{className:"mb-2 font-medium",children:t}),(0,r.jsx)("ul",{className:"grid gap-1",children:s.map((e,t)=>(0,r.jsxs)("li",{className:"grid grid-cols-[20px_1fr] items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"block h-2 w-2 rounded-full ".concat(e.color)}),(0,r.jsxs)("span",{children:[e.label,": ",(0,r.jsx)("span",{className:"font-medium",children:e.value})]})]},t))})]})}function S(e){let{className:t,children:s}=e;return(0,r.jsx)("div",{className:"w-full h-full ".concat(t),children:s})}function E(e){let{children:t}=e;return(0,r.jsx)(p.u,{width:"100%",height:"100%",children:t})}let k=b.W,C=v.h,T=N.Q,A=w.G,B=y.m;function R(e,t){let s=[...e].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());return{chartData:(function(e,t){let s=[];for(let r=0;r<e.length;r+=t)s.push(e.slice(r,r+t));return s})(s,t).map((e,t)=>{let s=q(e),r=e[e.length-1].timestamp;return{...s,timestamp:r,batchIndex:t}}),totals:q(s)}}function q(e){let t={status2xx:0,status3xx:0,status4xx:0,status5xx:0};return e.forEach(e=>{let s=e.status_code;s>=200&&s<300?t.status2xx++:s>=300&&s<400?t.status3xx++:s>=400&&s<500?t.status4xx++:s>=500&&t.status5xx++}),t}function L(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function D(e){let{data:t}=e;return(0,r.jsx)(S,{className:"h-full",children:(0,r.jsx)(E,{children:(0,r.jsxs)(T,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"status2xx",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.5}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"status3xx",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.5}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"status4xx",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.5}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"status5xx",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.5}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]})]}),(0,r.jsx)(k,{dataKey:"timestamp",tickFormatter:e=>L(e),tickLine:!1,axisLine:!1,padding:{left:20,right:20},fontSize:12,stroke:"#64748b"}),(0,r.jsx)(C,{tickLine:!1,axisLine:!1,width:30,fontSize:12,stroke:"#64748b"}),(0,r.jsx)(B,{content:e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,r.jsx)(_,{className:"w-[200px]",title:L(e.timestamp),items:[{label:"2xx Status",value:e.status2xx.toString(),color:"bg-green-500"},{label:"3xx Status",value:e.status3xx.toString(),color:"bg-blue-500"},{label:"4xx Status",value:e.status4xx.toString(),color:"bg-amber-500"},{label:"5xx Status",value:e.status5xx.toString(),color:"bg-red-500"}]})}return null}}),(0,r.jsx)(A,{type:"monotone",dataKey:"status2xx",stroke:"#22c55e",fillOpacity:1,fill:"url(#status2xx)",strokeWidth:2,activeDot:{r:6},name:"2xx Status",stackId:"1"}),(0,r.jsx)(A,{type:"monotone",dataKey:"status3xx",stroke:"#3b82f6",fillOpacity:1,fill:"url(#status3xx)",strokeWidth:2,activeDot:{r:6},name:"3xx Status",stackId:"2"}),(0,r.jsx)(A,{type:"monotone",dataKey:"status4xx",stroke:"#f59e0b",fillOpacity:1,fill:"url(#status4xx)",strokeWidth:2,activeDot:{r:6},name:"4xx Status",stackId:"3"}),(0,r.jsx)(A,{type:"monotone",dataKey:"status5xx",stroke:"#ef4444",fillOpacity:1,fill:"url(#status5xx)",strokeWidth:2,activeDot:{r:6},name:"5xx Status",stackId:"4"})]})})})}var M=s(161),z=s(4483),P=s(9983),H=s(3397),Z=s(9516),F=s(9252),O=s(3956),W=s(822);function I(e){let{logs:t}=e,[s,l]=(0,a.useState)(""),[n,o]=(0,a.useState)(1),[i,c]=(0,a.useState)("timestamp"),[d,x]=(0,a.useState)("desc"),[u,m]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),g=t.filter(e=>{let t=""===s||Object.values(e).some(e=>null!==e&&e.toString().toLowerCase().includes(s.toLowerCase())),r=null===u||e.status_code.toString().startsWith(u),a=null===h||e.method===h;return t&&r&&a}),j=[...g].sort((e,t)=>{let s=e[i],r=t[i];return null===s?"asc"===d?-1:1:null===r?"asc"===d?1:-1:s<r?"asc"===d?-1:1:s>r?"asc"===d?1:-1:0}),p=Math.ceil(j.length/10),b=(n-1)*10,v=j.slice(b,b+10),N=Array.from(new Set(t.map(e=>e.method))),w=e=>{e===i?x("asc"===d?"desc":"asc"):(c(e),x("asc"))},y=e=>e>=200&&e<300?"bg-green-100 text-green-800":e>=300&&e<400?"bg-blue-100 text-blue-800":e>=400&&e<500?"bg-amber-100 text-amber-800":e>=500?"bg-red-100 text-red-800":"";return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,r.jsx)(Z.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(H.p,{placeholder:"Search logs...",className:"pl-8",value:s,onChange:e=>{l(e.target.value),o(1)}})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(z.rI,{children:[(0,r.jsx)(z.ty,{asChild:!0,children:(0,r.jsxs)(P.$,{variant:"outline",size:"sm",className:"h-10",children:[(0,r.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Status",u&&(0,r.jsxs)("span",{className:"ml-1",children:[": ",u,"xx"]})]})}),(0,r.jsxs)(z.SQ,{align:"end",children:[(0,r.jsx)(z._2,{onClick:()=>m(null),children:"All"}),(0,r.jsx)(z._2,{onClick:()=>m("2"),children:"2xx"}),(0,r.jsx)(z._2,{onClick:()=>m("3"),children:"3xx"}),(0,r.jsx)(z._2,{onClick:()=>m("4"),children:"4xx"}),(0,r.jsx)(z._2,{onClick:()=>m("5"),children:"5xx"})]})]}),(0,r.jsxs)(z.rI,{children:[(0,r.jsx)(z.ty,{asChild:!0,children:(0,r.jsxs)(P.$,{variant:"outline",size:"sm",className:"h-10",children:[(0,r.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Method",h&&(0,r.jsxs)("span",{className:"ml-1",children:[": ",h]})]})}),(0,r.jsxs)(z.SQ,{align:"end",children:[(0,r.jsx)(z._2,{onClick:()=>f(null),children:"All"}),N.map(e=>(0,r.jsx)(z._2,{onClick:()=>f(e),children:e},e))]})]})]})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(M.XI,{children:[(0,r.jsx)(M.A0,{children:(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nd,{className:"w-[180px] cursor-pointer",onClick:()=>w("timestamp"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Timestamp","timestamp"===i&&("asc"===d?(0,r.jsx)(O.A,{className:"ml-1 h-4 w-4"}):(0,r.jsx)(W.A,{className:"ml-1 h-4 w-4"}))]})}),(0,r.jsx)(M.nd,{className:"cursor-pointer",onClick:()=>w("ip"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["IP","ip"===i&&("asc"===d?(0,r.jsx)(O.A,{className:"ml-1 h-4 w-4"}):(0,r.jsx)(W.A,{className:"ml-1 h-4 w-4"}))]})}),(0,r.jsx)(M.nd,{className:"cursor-pointer",onClick:()=>w("method"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Method","method"===i&&("asc"===d?(0,r.jsx)(O.A,{className:"ml-1 h-4 w-4"}):(0,r.jsx)(W.A,{className:"ml-1 h-4 w-4"}))]})}),(0,r.jsx)(M.nd,{children:"Path"}),(0,r.jsx)(M.nd,{className:"text-center cursor-pointer",onClick:()=>w("status_code"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:["Status","status_code"===i&&("asc"===d?(0,r.jsx)(O.A,{className:"ml-1 h-4 w-4"}):(0,r.jsx)(W.A,{className:"ml-1 h-4 w-4"}))]})}),(0,r.jsx)(M.nd,{className:"text-right",children:"Size"})]})}),(0,r.jsx)(M.BF,{children:v.length>0?v.map((e,t)=>(0,r.jsxs)(M.Hj,{children:[(0,r.jsx)(M.nA,{className:"font-mono text-xs",children:new Date(e.timestamp).toLocaleString("en-US",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,r.jsx)(M.nA,{className:"font-mono text-xs",children:e.ip}),(0,r.jsx)(M.nA,{children:e.method}),(0,r.jsxs)(M.nA,{className:"max-w-[200px] truncate",title:"".concat(e.path).concat(e.query?"?".concat(e.query):""),children:[e.path,e.query?"?".concat(e.query):""]}),(0,r.jsx)(M.nA,{className:"text-center",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(y(e.status_code)),children:e.status_code})}),(0,r.jsxs)(M.nA,{className:"text-right font-mono text-xs",children:[e.response_size," B"]})]},"".concat(e.timestamp,"-").concat(t))):(0,r.jsx)(M.Hj,{children:(0,r.jsx)(M.nA,{colSpan:6,className:"h-24 text-center",children:"No results found."})})})]})}),p>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",b+1,"-",Math.min(b+10,g.length)," of ",g.length," ","entries"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(P.$,{variant:"outline",size:"sm",onClick:()=>o(e=>Math.max(e-1,1)),disabled:1===n,children:"Previous"}),(0,r.jsxs)("div",{className:"text-sm",children:["Page ",n," of ",p]}),(0,r.jsx)(P.$,{variant:"outline",size:"sm",onClick:()=>o(e=>Math.min(e+1,p)),disabled:n===p,children:"Next"})]})]})]})}function X(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(10),{request:c,loading:d,error:x}=(0,l.Ay)();(0,a.useEffect)(()=>{(async()=>{try{let e=await c("/nginx/structured/logs");t(e);let s=R(e,o);n(s)}catch(e){console.error("Error fetching logs:",e),setError(e instanceof Error?e.message:"Failed to fetch logs")}finally{setIsLoading(!1)}})()},[o,c]);let u=t=>{i(t),e.length>0&&n(R(e,t))};return d?(0,r.jsx)("div",{className:"flex items-center justify-center h-[600px]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading logs..."})]})}):x?(0,r.jsxs)(f.Zp,{className:"bg-destructive/10",children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Error Loading Logs"})}),(0,r.jsxs)(f.Wu,{children:[(0,r.jsx)("p",{children:x}),(0,r.jsx)("button",{className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md",onClick:()=>window.location.reload(),children:"Retry"})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(f.ZB,{children:"Status Code Distribution Over Time"}),(0,r.jsxs)(f.BT,{children:["Visualizing HTTP status codes from ",e.length," log entries"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Batch Size:"}),(0,r.jsxs)("select",{className:"px-2 py-1 rounded-md border border-input bg-background text-sm",value:o,onChange:e=>u(Number(e.target.value)),children:[(0,r.jsx)("option",{value:"5",children:"5"}),(0,r.jsx)("option",{value:"10",children:"10"}),(0,r.jsx)("option",{value:"20",children:"20"}),(0,r.jsx)("option",{value:"50",children:"50"}),(0,r.jsx)("option",{value:"100",children:"100"})]})]})]})}),(0,r.jsx)(f.Wu,{children:s&&(0,r.jsx)("div",{className:"h-[400px]",children:(0,r.jsx)(D,{data:s.chartData})})})]}),(0,r.jsxs)(j.tU,{defaultValue:"table",children:[(0,r.jsxs)(j.j7,{className:"mb-4",children:[(0,r.jsx)(j.Xi,{value:"table",children:"Detailed Logs"}),(0,r.jsx)(j.Xi,{value:"summary",children:"Summary"})]}),(0,r.jsx)(j.av,{value:"table",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(f.ZB,{children:"Log Entries"}),(0,r.jsx)(f.BT,{children:"Detailed view of all log entries"})]}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)(I,{logs:e})})]})}),(0,r.jsx)(j.av,{value:"summary",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(f.ZB,{children:"Log Summary"}),(0,r.jsx)(f.BT,{children:"Summary statistics of log data"})]}),(0,r.jsx)(f.Wu,{children:s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(G,{title:"2xx Responses",value:s.totals.status2xx,percentage:Math.round(s.totals.status2xx/e.length*100),color:"bg-green-100 text-green-800"}),(0,r.jsx)(G,{title:"3xx Responses",value:s.totals.status3xx,percentage:Math.round(s.totals.status3xx/e.length*100),color:"bg-blue-100 text-blue-800"}),(0,r.jsx)(G,{title:"4xx Responses",value:s.totals.status4xx,percentage:Math.round(s.totals.status4xx/e.length*100),color:"bg-amber-100 text-amber-800"}),(0,r.jsx)(G,{title:"5xx Responses",value:s.totals.status5xx,percentage:Math.round(s.totals.status5xx/e.length*100),color:"bg-red-100 text-red-800"})]})})]})})]})]})}function G(e){let{title:t,value:s,percentage:a,color:l}=e;return(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(l),children:[(0,r.jsx)("h3",{className:"font-medium",children:t}),(0,r.jsxs)("div",{className:"flex items-end justify-between mt-2",children:[(0,r.jsx)("span",{className:"text-2xl font-bold",children:s}),(0,r.jsxs)("span",{className:"text-sm",children:[a,"%"]})]})]})}let K=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e||!e)return"0 Bytes";if(isNaN(e))return"NaN Bytes";let s=t<0?0:t,r=["Bytes","KB","MB","GB","TB"];if(e<1&&e>0)return e.toFixed(s)+" Bytes";let a=Math.max(0,Math.min(Math.floor(Math.log(e)/Math.log(1024)),r.length-1));return parseFloat((e/Math.pow(1024,a)).toFixed(s))+" "+r[a]},U=e=>{e.sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp));let t=e[0],s=Math.max(1,Math.floor(Math.ceil((new Date(e[e.length-1].timestamp)-new Date(t.timestamp))/36e5)/24));return Object.values(e.reduce((e,t)=>{try{let r=new Date(t.timestamp),a=Math.floor(r.getHours()/s)*s,l=new Date(r.getFullYear(),r.getMonth(),r.getDate(),a).toISOString();e[l]||(e[l]={dateTime:l,label:"",status_2xx:0,status_3xx:0,status_4xx:0,status_5xx:0,response_size:0});let n=e[l],o=t.status_code;o>=200&&o<300?n.status_2xx+=1:o>=300&&o<400?n.status_3xx+=1:o>=400&&o<500?n.status_4xx+=1:o>=500&&(n.status_5xx+=1),n.response_size+=Number(t.response_size)||0}catch(e){console.error("Error processing timestamp for entry:",t,e)}return e},{})).sort((e,t)=>new Date(e.dateTime)-new Date(t.dateTime)).map(e=>{let t=new Date(e.dateTime);return e.label=t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""),e})};function $(){let{request:e,loading:t,error:s,setError:n}=(0,l.Ay)(),[o,i]=a.useState([]),[c,d]=a.useState(null),[x,u]=a.useState([]),[m,h]=a.useState(!1),f=a.useCallback(async t=>{h(!0),n(null);try{let t=await e("/nginx/structured/logs"),s=U(t||[]);u(s)}catch(e){console.error("Failed to fetch structured data for log ".concat(t,":"),e),n((null==e?void 0:e.message)||"Failed to fetch structured data for log ".concat(t)),u([])}finally{h(!1)}},[e,n]),j=a.useCallback(async()=>{h(!0),n(null),d(null),u([]);try{let t=await e("/nginx/logs");if(i(t||[]),t&&t.length>0){let e=t.find(e=>"access.log"===e.name),s=null;if(e)s=e;else{let e=t.filter(e=>!e.name.endsWith(".gz"));e.length>0&&(s=e.reduce((e,t)=>e.size_bytes>t.size_bytes?e:t))}s?(d(s),await f(s.name)):(n("No suitable log file found (access.log or other non-gzipped log)."),i([]))}else n("No log files found.")}catch(e){console.error("Failed to fetch logs:",e),n((null==e?void 0:e.message)||"Failed to fetch logs list."),i([])}finally{c||h(!1)}},[e,n,f]);return a.useEffect(()=>{j()},[j]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{logData:x,isLoading:m||t,error:s,chartConfig:{status_2xx:{label:" 2xx Success",color:"#22c55e"},status_3xx:{label:" 3xx Redirection",color:"#3b82f6"},status_4xx:{label:" 4xx Client Error",color:"#f97316"},status_5xx:{label:" 5xx Server Error",color:"#ef4444"},response_size:{label:" Response Size",color:"#8b5cf6"}},formatBytes:K}),(0,r.jsx)("div",{className:"px-4 lg:px-6 mt-6",children:(0,r.jsx)(X,{})})]})}},6591:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>o,TN:()=>c,XL:()=>i});var r=s(7876);s(4232);var a=s(9518),l=s(8928);let n=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(n({variant:s}),t),...a})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}},6663:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(3601)}])},9081:(e,t,s)=>{"use strict";s.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>n,wL:()=>d});var r=s(7876);s(4232);var a=s(8928);function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[766,636,593,792],()=>t(6663)),_N_E=e.O()}]);