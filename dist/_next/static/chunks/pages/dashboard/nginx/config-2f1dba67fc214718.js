(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{138:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/nginx/config",function(){return a(655)}])},655:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var t=a(7876),n=a(7328),r=a.n(n),i=a(4232),l=a(1379),c=a(9983),d=a(6591),o=a(9081),x=a(2774);let u=(0,a(1713).A)("file-code",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);var h=a(3214),m=a(4905),f=a(3957),g=a(753),j=a(345),v=a(1312),p=a(3569),N=a(2689),b=a(7180),w=a(6246),k=a(2195),y=a(8847);let _=a.n(y)()(()=>a.e(850).then(a.bind(a,850)),{loadableGenerated:{webpack:()=>[850]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"w-full h-[60vh] bg-muted/30 rounded-md flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(x.E,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(x.E,{className:"h-4 w-32"}),(0,t.jsx)(x.E,{className:"h-3 w-24 mt-2"})]})})}),C=()=>{let{request:e,loading:s,error:a,setError:n}=(0,l.Ay)(),[r,x]=(0,i.useState)(""),[y,C]=(0,i.useState)(""),[S,A]=(0,i.useState)(!1),[z,E]=(0,i.useState)(!1),[T,$]=(0,i.useState)(!1),[Z,X]=(0,i.useState)("editor"),[F,L]=(0,i.useState)("vs-dark"),[M,I]=(0,i.useState)({minimap:{enabled:!0},scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on",lineNumbers:"on"}),U=(0,i.useRef)(null),B=r!==y,P=(0,i.useCallback)(async()=>{A(!0),n(null),$(!1);try{let s=await e("/nginx/conf"),a=(null==s?void 0:s.content)||"";x(a),C(a)}catch(e){console.error("Failed to fetch nginx.conf:",e),x(""),C("")}finally{A(!1)}},[e,n]);(0,i.useEffect)(()=>{P()},[P]);let R=async()=>{E(!0),n(null),$(!1);try{await e("/nginx/conf",{method:"PUT",body:JSON.stringify({content:r})}),C(r),$(!0),setTimeout(()=>$(!1),3e3)}catch(e){console.error("Failed to save nginx.conf:",e)}finally{E(!1)}},V=S||z;return(0,t.jsx)(w.Bc,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,t.jsx)(u,{className:"h-5 w-5 mr-2"}),"nginx.conf Editor"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)(w.m_,{children:[(0,t.jsx)(w.k$,{asChild:!0,children:(0,t.jsx)(c.$,{onClick:()=>{L("vs-dark"===F?"light":"vs-dark")},variant:"outline",size:"icon",className:"h-8 w-8",children:"vs-dark"===F?(0,t.jsx)(h.A,{className:"h-3.5 w-3.5"}):(0,t.jsx)(m.A,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(w.ZI,{children:(0,t.jsx)("p",{children:"Toggle Theme"})})]}),(0,t.jsxs)(w.m_,{children:[(0,t.jsx)(w.k$,{asChild:!0,children:(0,t.jsx)(c.$,{onClick:()=>{I({...M,minimap:{enabled:!M.minimap.enabled}})},variant:"outline",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(f.A,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(w.ZI,{children:(0,t.jsx)("p",{children:"Toggle Minimap"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsxs)(w.m_,{children:[(0,t.jsx)(w.k$,{asChild:!0,children:(0,t.jsx)(c.$,{onClick:()=>{x(y),n(null),$(!1)},variant:"outline",size:"icon",disabled:!B||V,className:"h-8 w-8",children:(0,t.jsx)(g.A,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(w.ZI,{children:(0,t.jsx)("p",{children:"Discard Changes"})})]}),(0,t.jsxs)(w.m_,{children:[(0,t.jsx)(w.k$,{asChild:!0,children:(0,t.jsx)(c.$,{onClick:R,variant:"default",size:"icon",disabled:!B||V,className:"h-8 w-8",children:(0,t.jsx)(j.A,{className:"h-3.5 w-3.5 ".concat(z?"animate-pulse":"")})})}),(0,t.jsx)(w.ZI,{children:(0,t.jsx)("p",{children:"Save Changes"})})]}),(0,t.jsxs)(w.m_,{children:[(0,t.jsx)(w.k$,{asChild:!0,children:(0,t.jsx)(c.$,{onClick:P,variant:"outline",size:"icon",disabled:V,className:"h-8 w-8",children:(0,t.jsx)(v.A,{className:"h-3.5 w-3.5 ".concat(S?"animate-spin":"")})})}),(0,t.jsx)(w.ZI,{children:(0,t.jsx)("p",{children:"Reload Config from Server"})})]})]})]})]}),T&&(0,t.jsxs)(d.Fc,{className:"bg-primary/10 border-primary",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(d.XL,{children:"Success"}),(0,t.jsx)(d.TN,{children:"Nginx configuration saved successfully."})]}),a&&(0,t.jsxs)(d.Fc,{variant:"destructive",children:[(0,t.jsx)(d.XL,{children:"Error"}),(0,t.jsx)(d.TN,{children:a})]}),(0,t.jsx)(o.Zp,{className:"border border-border",children:(0,t.jsx)(o.Wu,{className:"p-0",children:(0,t.jsxs)(k.tU,{value:Z,onValueChange:X,className:"w-full h-[65vh]",children:[(0,t.jsxs)(k.j7,{className:"mx-4 mt-2",children:[(0,t.jsxs)(k.Xi,{value:"editor",className:"flex items-center gap-1",children:[(0,t.jsx)(N.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:"Editor"})]}),(0,t.jsxs)(k.Xi,{value:"raw",className:"flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:"Raw"})]})]}),(0,t.jsx)(k.av,{value:"editor",className:"data-[state=active]:h-full m-0 border-none",children:(0,t.jsx)(_,{height:"100%",language:"nginx",theme:F,value:r,options:M,onChange:x,onMount:(e,s)=>{U.current=e,s.languages.register({id:"nginx"}),s.languages.setMonarchTokensProvider("nginx",{keywords:["server","location","http","events","worker_processes","include","proxy_pass","listen","server_name","root","index","try_files","error_page","return"],tokenizer:{root:[[/[a-zA-Z_][\w]*/,{cases:{"@keywords":"keyword"}}],[/[{}]/,"delimiter.bracket"],[/[;]/,"delimiter"],[/^\s*#.*$/,"comment"],[/".*?"/,"string"],[/'.*?'/,"string"],[/[0-9]+/,"number"]]}})},loading:(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,t.jsx)(v.A,{className:"h-8 w-8 animate-spin opacity-30"})})})}),(0,t.jsx)(k.av,{value:"raw",className:"data-[state=active]:h-full m-0 border-none",children:(0,t.jsx)("div",{className:"h-[65vh] w-full overflow-auto bg-muted p-4 font-mono text-sm",children:(0,t.jsx)("pre",{className:"h-full whitespace-pre-wrap break-all",children:r})})})]})})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Note: Saving changes here updates the main nginx.conf file. Use with caution. A backup (.bak) should be created by the server."}),B&&(0,t.jsx)("div",{className:"fixed bottom-4 right-4 z-10",children:(0,t.jsxs)(c.$,{onClick:R,variant:"default",size:"sm",disabled:V,className:"shadow-lg",children:[(0,t.jsx)(j.A,{className:"h-3.5 w-3.5 mr-2"}),"Save Changes"]})})]})})};function S(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r(),{children:[(0,t.jsx)("title",{children:"Secure UI - Nginx Configuration"}),(0,t.jsx)("meta",{name:"description",content:"View and edit the main Nginx configuration file"})]}),(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Main Nginx Configuration (nginx.conf)"}),(0,t.jsx)("div",{className:" rounded shadow",children:(0,t.jsx)(C,{})})]})}},2195:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>d,j7:()=>l,tU:()=>i});var t=a(7876);a(4232);var n=a(491),r=a(8928);function i(e){let{className:s,...a}=e;return(0,t.jsx)(n.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",s),...a})}},6591:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>l,TN:()=>d,XL:()=>c});var t=a(7876);a(4232);var n=a(9518),r=a(8928);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(i({variant:a}),s),...n})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}},9081:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>r,aR:()=>i,wL:()=>o});var t=a(7876);a(4232);var n=a(8928);function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[826,636,593,792],()=>s(138)),_N_E=e.O()}]);