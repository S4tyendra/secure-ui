(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{2089:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3368:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/nginx/logs",function(){return a(3455)}])},3455:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var s=a(7876),n=a(7328),l=a.n(n),r=a(4232),c=a(8230),i=a.n(c);a(9099);var o=a(1379),d=a(9983);a(9081);var x=a(8928);function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,x.cn)("w-full caption-bottom text-sm",t),...a})})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,x.cn)("[&_tr]:border-b",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,x.cn)("[&_tr:last-child]:border-0",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,x.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,x.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,x.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("caption",{"data-slot":"table-caption",className:(0,x.cn)("text-muted-foreground mt-4 text-sm",t),...a})}var v=a(6739),b=a(7446),N=a(1312);let y=(0,a(1713).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var w=a(2089),k=a(6591),_=a(6246),E=a(7391),A=a(2774),C=a(5205);let L=e=>{let{logName:t,isOpen:a,onClose:n,onLogDeleted:l}=e,{request:r,loading:c,error:i,setError:x}=(0,o.Ay)(),u=async()=>{x(null);try{await r("/nginx/logs/".concat(t),{method:"DELETE"}),l(),n()}catch(e){console.error("Failed to delete log ".concat(t,":"),e)}};return(0,s.jsx)(E.lG,{open:a,onOpenChange:n,children:(0,s.jsxs)(E.Cf,{className:"bg-white dark:bg-gray-900",children:[(0,s.jsxs)(E.c7,{children:[(0,s.jsx)(E.L3,{children:"Confirm Deletion"}),(0,s.jsxs)(E.rr,{children:["Are you sure you want to delete log file ",(0,s.jsx)("strong",{children:t}),"? This action cannot be undone."]})]}),i&&(0,s.jsxs)(k.Fc,{variant:"destructive",className:"mt-4",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)(k.XL,{children:"Error"}),(0,s.jsx)(k.TN,{children:i})]}),(0,s.jsxs)(E.Es,{children:[(0,s.jsx)(d.$,{variant:"outline",onClick:n,disabled:c,children:"Cancel"}),(0,s.jsx)(d.$,{variant:"destructive",onClick:u,disabled:c,children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB"][a]},F=()=>{let{request:e,error:t,setError:a}=(0,o.Ay)(),[n,l]=(0,r.useState)([]),[c,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[E,F]=(0,r.useState)(null),M=(0,r.useCallback)(async()=>{x(!0),a(null);try{let t=await e("/nginx/logs");l(t||[])}catch(e){console.error("Failed to fetch logs:",e),l([])}finally{x(!1)}},[e,a]);(0,r.useEffect)(()=>{M()},[M]);let B=e=>{F(e),b(!0)};return(0,s.jsx)(_.Bc,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Log Files"}),(0,s.jsx)(d.$,{onClick:M,variant:"outline",size:"icon",disabled:c,children:(0,s.jsx)(N.A,{className:"h-4 w-4 ".concat(c?"animate-spin":"")})})]}),t&&!c&&(0,s.jsxs)(k.Fc,{className:"mb-4",children:[(0,s.jsx)(k.XL,{children:"Error"}),(0,s.jsx)(k.TN,{children:t})]}),(0,s.jsxs)(u,{children:[(0,s.jsxs)(p,{children:["List of Nginx log files. ",c?"Loading...":""]}),(0,s.jsx)(h,{children:(0,s.jsxs)(g,{children:[(0,s.jsx)(f,{children:"Log Name"}),(0,s.jsx)(f,{children:"Size"}),(0,s.jsx)(f,{children:"Last Modified"}),(0,s.jsx)(f,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(m,{children:c?Array.from({length:3}).map((e,t)=>(0,s.jsxs)(g,{children:[(0,s.jsx)(j,{children:(0,s.jsx)(A.E,{className:"h-4 w-[200px]"})}),(0,s.jsx)(j,{children:(0,s.jsx)(A.E,{className:"h-4 w-[80px]"})}),(0,s.jsx)(j,{children:(0,s.jsx)(A.E,{className:"h-4 w-[150px]"})}),(0,s.jsxs)(j,{className:"text-right space-x-2",children:[(0,s.jsx)(A.E,{className:"h-8 w-8 inline-block"}),(0,s.jsx)(A.E,{className:"h-8 w-8 inline-block"})]})]},"skeleton-".concat(t))):0===n.length?(0,s.jsx)(g,{children:(0,s.jsx)(j,{colSpan:4,className:"text-center",children:"No log files found."})}):n.map(e=>(0,s.jsxs)(g,{children:[(0,s.jsx)(j,{className:"font-medium",children:e.name}),(0,s.jsx)(j,{children:z(e.size_bytes)}),(0,s.jsx)(j,{children:e.last_modified?(0,C.GP)(new Date(1e3*e.last_modified),"Pp"):"N/A"}),(0,s.jsxs)(j,{className:"text-right space-x-2",children:[(0,s.jsxs)(_.m_,{children:[(0,s.jsx)(_.k$,{asChild:!0,children:(0,s.jsx)(d.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,s.jsx)(i(),{href:"/dashboard/nginx/logs/".concat(e.name),children:(0,s.jsx)(y,{className:"h-4 w-4"})})})}),(0,s.jsx)(_.ZI,{children:(0,s.jsx)("p",{children:"View Log"})})]}),(0,s.jsxs)(_.m_,{children:[(0,s.jsx)(_.k$,{asChild:!0,children:(0,s.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>B(e.name),children:(0,s.jsx)(w.A,{className:"h-4 w-4"})})}),(0,s.jsx)(_.ZI,{children:(0,s.jsx)("p",{children:"Delete Log"})})]})]})]},e.name))})]}),(0,s.jsx)(L,{logName:E,isOpen:v,onClose:()=>{b(!1),F(null)},onLogDeleted:()=>{M()}})]})})};function M(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Secure UI - Nginx Logs"}),(0,s.jsx)("meta",{name:"description",content:"View and manage Nginx log files"})]}),(0,s.jsx)(F,{})]})}},6591:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>c,TN:()=>o,XL:()=>i});var s=a(7876);a(4232);var n=a(9518),l=a(8928);let r=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(r({variant:a}),t),...n})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},6739:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1713).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7391:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>d,Es:()=>u,L3:()=>h,c7:()=>x,lG:()=>c,rr:()=>m});var s=a(7876);a(4232);var n=a(6303),l=a(672),r=a(8928);function c(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"dialog",...t})}function i(e){let{...t}=e;return(0,s.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function d(e){let{className:t,children:a,...c}=e;return(0,s.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,s.jsx)(o,{}),(0,s.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[a,(0,s.jsxs)(n.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}},7446:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1713).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9081:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>r,wL:()=>d});var s=a(7876);a(4232);var n=a(8928);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[589,636,593,792],()=>t(3368)),_N_E=e.O()}]);