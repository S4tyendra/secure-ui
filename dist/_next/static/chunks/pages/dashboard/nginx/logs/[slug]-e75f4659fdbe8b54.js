(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{2060:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var a=s(7876);s(4232);var r=s(2987),i=s(9518),n=s(8928);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,asChild:i=!1,...c}=e,d=i?r.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:s}),t),...c})}},2963:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5189:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(7876),r=s(4232),i=s(9099),n=s(7328),l=s.n(n),c=s(8230),d=s.n(c),o=s(3760),u=s(9983),x=s(3397),m=s(9081),h=s(6591),g=s(2774),f=s(2060),v=s(2963),p=s(1312),j=s(1713);let N=(0,j.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var w=s(5390);let b=(0,j.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var y=s(5205);let _=()=>{let{slug:e}=(0,i.useRouter)().query,{request:t,loading:s,error:n,setError:c}=(0,o.Ay)(),[j,_]=(0,r.useState)(""),[k,E]=(0,r.useState)(null),[B,F]=(0,r.useState)(100),[z,A]=(0,r.useState)(!1),L=async()=>{if(e){c(null);try{let s=await t("/nginx/logs/".concat(e,"?tail=").concat(B),{headers:{Accept:"text/plain"}});_(s||"Log is empty or could not be read.");let a=(await t("/nginx/logs")).find(t=>t.name===e);a&&E(a)}catch(t){console.error("Failed to fetch log content for ".concat(e,":"),t),_("Error loading log: ".concat(t.message))}}};(0,r.useEffect)(()=>{e&&L()},[e,B]);let T=async()=>{try{await navigator.clipboard.writeText(j),A(!0),setTimeout(()=>A(!1),2e3)}catch(e){console.error("Failed to copy: ",e)}},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB"][s]};return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsxs)("title",{children:["Log Viewer - ",e]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(d(),{href:"/dashboard/nginx/logs",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-1"}),"Back to Logs"]})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:e}),k&&(0,a.jsx)(f.E,{variant:"outline",className:"ml-2",children:C(k.size_bytes)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Tail lines:"}),(0,a.jsx)(x.p,{type:"number",value:B,onChange:e=>{let t=e.target.value;if(""===t)return void F("");let s=parseInt(t,10);isNaN(s)||F(s)},className:"w-20 h-9",placeholder:"100",min:"0"})]}),(0,a.jsx)(u.$,{onClick:L,variant:"outline",size:"icon",disabled:s,className:"h-9 w-9",children:(0,a.jsx)(p.A,{className:"h-4 w-4 ".concat(s?"animate-spin":"")})}),(0,a.jsx)(u.$,{onClick:T,variant:"outline",size:"icon",className:"h-9 w-9",children:(0,a.jsx)(N,{className:"h-4 w-4"})})]})]}),z&&(0,a.jsx)(h.Fc,{className:"bg-primary/10 border-primary",children:(0,a.jsx)(h.XL,{children:"Copied to clipboard"})}),n&&(0,a.jsxs)(h.Fc,{variant:"destructive",children:[(0,a.jsx)(h.XL,{children:"Error"}),(0,a.jsx)(h.TN,{children:n})]}),k&&(0,a.jsx)(m.Zp,{className:"mb-4",children:(0,a.jsx)(m.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"File Size"}),(0,a.jsx)("p",{className:"font-medium",children:C(k.size_bytes)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Modified"}),(0,a.jsx)("p",{className:"font-medium",children:k.last_modified?(0,y.GP)(new Date(1e3*k.last_modified),"PPpp"):"N/A"})]})]})})}),(0,a.jsxs)(m.Zp,{className:"w-full",children:[(0,a.jsx)(m.aR,{className:"pb-0",children:(0,a.jsxs)(m.ZB,{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 mr-2"}),"Log Content",B>0&&(0,a.jsxs)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(Showing last ",B," lines)"]}),B<=0&&(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Showing full file)"})]})}),(0,a.jsx)(m.Wu,{children:s?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.E,{className:"h-4 w-full"}),(0,a.jsx)(g.E,{className:"h-4 w-3/4"}),(0,a.jsx)(g.E,{className:"h-4 w-5/6"}),(0,a.jsx)(g.E,{className:"h-4 w-2/3"})]}):(0,a.jsx)("pre",{className:"text-xs overflow-auto bg-muted p-4 rounded-md max-h-[70vh] w-full text-foreground whitespace-pre-wrap",children:j})}),(0,a.jsxs)(m.wL,{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:j&&!s&&"".concat(j.split("\n").length-1," lines")}),(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>window.scrollTo(0,document.body.scrollHeight),children:[(0,a.jsx)(b,{className:"h-4 w-4 mr-1"}),"Scroll to Bottom"]})]})]})]})]}):(0,a.jsx)("div",{className:"flex justify-center items-center h-[50vh]",children:(0,a.jsx)(g.E,{className:"h-8 w-8 rounded-full"})})}},6591:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>d,XL:()=>c});var a=s(7876);s(4232);var r=s(9518),i=s(8928);let n=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(n({variant:s}),t),...r})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-title",className:(0,i.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}},7910:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/nginx/logs/[slug]",function(){return s(5189)}])},9081:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>o});var a=s(7876);s(4232);var r=s(8928);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[589,636,593,792],()=>t(7910)),_N_E=e.O()}]);